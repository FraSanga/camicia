<VirtualHost *:80>
    DocumentRoot ${SERVER_VOLUME_PROJECTS_DIR}/camicia/html/user
    ServerName ${DOMAIN}

    ScriptAlias /camicia_cgi/ ${SERVER_VOLUME_PROJECTS_DIR}/camicia/cgi-bin/
    <Directory "${SERVER_VOLUME_PROJECTS_DIR}/camicia/cgi-bin">
        Options +ExecCGI
        AllowOverride None
        Require all granted
    </Directory>

    Alias /camicia/download ${SERVER_VOLUME_PROJECTS_DIR}/camicia/download
    <Directory "${SERVER_VOLUME_PROJECTS_DIR}/camicia/download">
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /camicia ${SERVER_VOLUME_PROJECTS_DIR}/camicia/html/user
    <Directory "${SERVER_VOLUME_PROJECTS_DIR}/camicia/html/user">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Require all granted
    </Directory>

    # NOTE: keep safe this folder with password (.htaccess)
    Alias /camicia_ops ${SERVER_VOLUME_PROJECTS_DIR}/camicia/html/ops
    <Directory "${SERVER_VOLUME_PROJECTS_DIR}/camicia/html/ops">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Require all granted
    </Directory>

    <DirectoryMatch "^/.*/(keys|upload)/">
        Require all denied
    </DirectoryMatch>

    ErrorLog ${SERVER_VOLUME_PROJECTS_DIR}/boinc_error.log
    CustomLog ${SERVER_VOLUME_PROJECTS_DIR}/boinc_access.log combined
</VirtualHost>